@using SmartTouch.CRM.ApplicationServices.ViewModels
@model SendCampaignViewModel
@{
}

<script src="~/Scripts/ViewModels/CampaignTemplatesViewModel.js"></script>

<div id="campaigntemplates" class="sendemail dp-topnav-inner" >
    <div class="main-template">
        <div class="clearfix">
            @*<div class="pull-left" id="templatechange">
                    <a class="btn btn-default active" href="javascript:void(0)" data-tcview="ftemplate" data-bind="click:showAllTemplates">[|All|]</a>
                    <a class="btn btn-default" href="javascript:void(0)" data-tcview="flayout" data-bind="click:showOnlyLayouts">[|Layouts|]</a>
                    <a class="btn btn-default" href="javascript:void(0)" data-tcview="fpredesign" data-bind="click:showOnlyPredesigned">[|Predesigned|]</a>
                </div>*@
            <div class="pull-right">
                <div class="layout-search">
                    <input type="search" class=" form-control" placeholder="[|Search|]" id="templatesearch">
                    <i class="icon st-icon-search-2"></i>
                </div>
            </div>
        </div>

        @*<div role="alert" class="alert alert-danger mtl fade hide" id="campaigntemplatealert">
                @*<button data-dismiss="alert" class="close" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <p data-bind="validationMessage:templateValidation"><p>
            </div>*@
        
        <div class="mtl show" id="ftemplate">

            <ul class="campaigns-layouts" data-bind="foreach:templates">

                <li>
                    <div class="layout animation5" @*data-bind="css: {selected: TemplateId == $parent.SelectedTemplateId()}"*@>
                        <div class="selected-check"><i class="fui-check"></i></div>
                        <div class="overlay">
                            <a href="#" class="btn btn-default overlay-btn select" @*data-bind="visible:TemplateId != $parent.SelectedTemplateId(),click: $parent.selectTemplate"*@>[|Select|]</a>
                            <a href="#previewcamp" data-toggle="modal" class="btn btn-default overlay-btn preview" @*data-bind="visible:TemplateId !=1,click: $parent.previewTemplate"*@>[|Preview|]</a>
                        </div>
                        <a href="javascript:void(0)"><img @*data-bind="attr:{src: ThumbnailImageUrl}"*@ alt="layout" /></a>
                    </div>
                    <div class="layout-title" @*data-bind="text:Name"*@></div>
                </li>
            </ul>
        </div>
    </div>

    <div class="modal fade" id="previewcamp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" @*data-bind="with:PreviewTemplate"*@>
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" @*data-bind="text:Name"*@></h4>
                </div>
                <div class="modal-body" @*data-bind="html: HTMLContent"*@>

                </div>
                <div class="modal-footer">
                    <div class="pull-left">
                        <a href="campaigns.html" class="btn btn-lg btn-primary" @*data-bind="click: $parent.selectTemplate"*@ data-dismiss="modal">[|Select|]</a>
                        <a href="javascript:void(0)" class="btn btn-lg mln" onclick="CloseTopInner(this)" data-dismiss="modal">[|Cancel|]</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        var BASE_URL = '@Url.Content("~/Contact/")';
        var campaign_Templates = @(Html.Raw(Json.Encode(Model)));
        var viewModel = new SendCampaign(campaign_Templates, BASE_URL);
        ko.applyBindings(viewModel);
    });
</script>
